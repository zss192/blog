---
title: æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•æ€»ç»“
tags:
  - ç®—æ³•(C++)
categories:
  - ç®—æ³•(C++)
date: 2021-03-30 11:12:00
---

# æ€æƒ³

ä»èµ·ç‚¹å‡ºå‘ï¼Œèµ°è¿‡çš„ç‚¹åšä¸Šæ ‡è®°ï¼Œè‹¥å‘ç°æœ‰æ²¡èµ°è¿‡çš„ç‚¹å°±éšæ„æŒ‘ä¸€ä¸ªå¾€å‰èµ°ï¼Œæ— è·¯å¯èµ°å°±å›é€€

# ä¼ªä»£ç æ¨¡æ¿

```cpp
Dfs(v)
{
    if(væ˜¯æ—§ç‚¹æˆ–æ»¡è¶³ç»“æŸæ¡ä»¶)
        return;
    
    å¯¹å’Œvç›¸é‚»çš„æ¯ä¸ªç‚¹Uå¦‚æœæ»¡è¶³æ¡ä»¶ï¼ˆè¿·å®«é—®é¢˜å¯¹åº”ç€ä¸Šå·¦ä¸‹å³æ–¹å‘ï¼‰
    {
				å°†væ ‡è®°ä¸ºæ—§ç‚¹;
        Dfs(U);
				å–æ¶ˆæ ‡è®°
    } 
}
int main(){
    å°†æ‰€æœ‰ç‚¹éƒ½æ ‡è®°ä¸ºæ–°ç‚¹
    Dfs(v);  //vä¸ºèµ·å§‹ç‚¹
    return 0;
} 
```

# ç»å…¸ä¾‹é¢˜

ğŸš©1.è¿·å®«é—®é¢˜

æˆ‘ä»¬ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„è¡¨ç¤ºä¸€ä¸ªè¿·å®«

```cpp
....S*
.***..
.*..*.
*.***.
.T....
//n=5,m=6
```

å…¶ä¸­å­—ç¬¦Sè¡¨ç¤ºèµ·ç‚¹ï¼Œå­—ç¬¦Tè¡¨ç¤ºç»ˆç‚¹ï¼Œå­—ç¬¦*è¡¨ç¤ºå¢™å£ï¼Œå­—ç¬¦.è¡¨ç¤ºå¹³åœ°ï¼Œä½ éœ€è¦ä»Så‡ºå‘èµ°åˆ°Tï¼Œæ¯æ¬¡åªèƒ½å‘ä¸Šä¸‹å·¦å³ç›¸é‚»çš„ä½ç½®ç§»åŠ¨ï¼Œä¸èƒ½èµ°å‡ºåœ°å›¾ï¼Œä¹Ÿä¸èƒ½ç©¿è¿‡å¢™å£ï¼Œæ¯ä¸ªç‚¹åªèƒ½é€šè¿‡ä¸€æ¬¡ï¼Œè¾“å‡ºä¸€ç§ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„èµ°æ³•

æ€è·¯ï¼šæˆ‘ä»¬å¯ä»¥ç”¨äºŒç»´æ•°ç»„è¡¨ç¤ºåœ°å›¾ï¼Œç„¶åç”¨dfsæ¥æŸ¥æ‰¾æ˜¯å¦èƒ½æ‰¾åˆ°ç»ˆç‚¹

```cpp
#include<bits/stdc++.h>
using namespace std;

int n,m;
char maze[110][110];    //åœ°å›¾è®°å½•æ¯ä¸ªä½ç½®
bool visited[110][110]; //è®°å½•å½“å‰ä½ç½®æ˜¯å¦å·²ç»èµ°è¿‡
bool in(int x,int y)    //åˆ¤æ–­åæ ‡xå’Œyæ˜¯å¦åœ¨åœ°å›¾å†…
{
    return 0<=x && x<n && 0<=y && y<m;
}

bool dfs(int x,int y)
{
    if(maze[x][y]=='T') //è‹¥é‡åˆ°å‡ºå£è¿”å›true
    {
        return true;
    }

    visited[x][y]=1;    //æ ‡è®°å½“å‰ä½ç½®ä¸ºå·²è®¿é—®
    maze[x][y]='m';     //ç”¨mæ¥è¡¨ç¤ºèµ°è¿‡äº†è¿™ä¸ªä½ç½®æ–¹ä¾¿è¾“å‡ºæŸ¥çœ‹è·¯çº¿
    
    //å°è¯•å‘ä¸Šèµ°
    int tx=x-1,ty=y;
    if(in(tx,ty)&&maze[tx][ty]!='*'&&!visited[tx][ty])   //å¦‚æœå¯ä»¥å‘ä¸Šèµ°ï¼Œä¸‹é¢ç±»ä¼¼
    {
        if(dfs(tx,ty))
            return true;
    }
    //å°è¯•å‘å·¦èµ°
    tx=x,ty=y-1;
    if(in(tx,ty)&&maze[tx][ty]!='*' && !visited[tx][ty])
    {
        if(dfs(tx,ty))
            return true;
    }
    //å°è¯•å‘ä¸‹èµ°
    tx=x+1,ty=y;
    if(in(tx,ty)&&maze[tx][ty]!='*' && !visited[tx][ty])
    {
        if(dfs(tx,ty))
            return true;
    }
    //å°è¯•å‘å³èµ°
    tx=x,ty=y+1;
    if(in(tx,ty)&&maze[tx][ty]!='*' && !visited[tx][ty])
    {
        if(dfs(tx,ty))
            return true;
    }

    //å–æ¶ˆæ ‡è®°
    visited[x][y]=0;
    maze[x][y]='.';
    return false;

}
int main(){
    cin>>n>>m;
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < m; j++)
        {
            cin>>maze[i][j];
        }
        
    }
    int x,y;
    //æ‰¾åˆ°èµ·å§‹ç‚¹Sçš„åæ ‡
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < m; j++)
        {
            if(maze[i][j]=='S')
                x=i,y=j;
        } 
    }
    memset(visited,false,sizeof(visited));   //è®¾ç½®åˆå§‹å€¼ä¸ºfalseï¼Œé¿å…å‡ºé—®é¢˜
    //å¯¹èµ·å§‹ç‚¹Sè°ƒç”¨dfså‡½æ•°ï¼Œè‹¥æ‰¾åˆ°è·¯åˆ™è¾“å‡ºç»“æœ
    if(dfs(x,y))
    {
        for (int i = 0; i < n; i++)
        {
            for (int j = 0; j < m; j++)
            {
                cout<<maze[i][j];
            }
            cout<<endl;    
        }  
    }
    else
    {
        cout<<"NO!"<<endl;
    }
    return 0;
}
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å°è¯•ä¸Šå·¦ä¸‹å³æœ‰ç‚¹é‡å¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„int dir[4][2]= {{-1,0},{0,-1},{1,0},{0,1}};æ¥è¡¨ç¤ºå¦‚æœå»ä¸Šå·¦ä¸‹å³xå’Œyçš„å¢é‡ï¼Œç„¶åç”¨ä¸€ä¸ªforå¾ªç¯æ¥ä¼˜åŒ–ä»£ç 

```cpp

int dir[4][2]={{-1,0},{0,-1},{1,0},{0,1}};  //è¡¨ç¤ºåˆ†åˆ«å‘ä¸Šå·¦ä¸‹å³(é€†æ—¶é’ˆ)æ–¹å‘xå’Œyçš„å¢é‡

//å°è¯•ä¸Šå·¦ä¸‹å³
for (int i = 0; i < 4; i++)
{
    int tx=x+dir[i][0];
    int ty=y+dir[i][1];
    if(in(tx,ty)&& maze[tx][ty]!='*' && !visited[tx][ty])
    {
        if(dfs(tx,ty))
            return true;
    }
}
```

ğŸš©2.è¿·å®«æœ€çŸ­è·¯å¾„é—®é¢˜(æœ€çŸ­è·¯å¾„é—®é¢˜æ›´é€‚åˆç”¨bfs)

åœ¨ä¸Šé¢é¢˜ç›®çš„åŸºç¡€ä¸Šä¸æ±‚å¯ä»¥åˆ°è¾¾çš„ä¸€ç§è·¯å¾„è€Œæ˜¯æ±‚æœ€çŸ­è·¯å¾„çš„é•¿åº¦

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,m;
char maze[110][110];    //åœ°å›¾è®°å½•æ¯ä¸ªä½ç½®
bool visited[110][110]; //è®°å½•å½“å‰ä½ç½®æ˜¯å¦å·²ç»èµ°è¿‡
int dir[4][2]={{-1,0},{0,-1},{1,0},{0,1}};
int res=10000000;

bool in(int x,int y)    //åˆ¤æ–­åæ ‡xå’Œyæ˜¯å¦åœ¨åœ°å›¾å†…
{
    return 0<=x && x<n && 0<=y && y<m;
}

void dfs(int x,int y,int step)  //stepè¡¨ç¤ºå½“å‰è·¯å¾„é•¿åº¦
{
    if(maze[x][y]=='T')   //è¾¾åˆ°ç»“æŸæ¡ä»¶
    {
        if(step<res)
        {
            res=step;
        }
        return;
    }

    visited[x][y]=true;    //æ ‡è®°å½“å‰ä½ç½®ä¸ºå·²è®¿é—®

    for (int i = 0; i < 4; i++)   //å°è¯•æ¯ä¸ªæ–¹å‘
    {
        int tx=x+dir[i][0];
        int ty=y+dir[i][1];
        if(in(tx,ty)&&maze[tx][ty]!='*'&&!visited[tx][ty])
        {
            dfs(tx,ty,step+1);
        }
    }

    //å–æ¶ˆæ ‡è®°,å› ä¸ºè¦æŠŠæ‰€æœ‰è·¯å¾„éƒ½æ‰¾å‡ºæ¥
    visited[x][y]=0;

}
int main(){
    cin>>n>>m;
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < m; j++)
        {
            cin>>maze[i][j];
        }
        
    }
    int x,y;
    //æ‰¾åˆ°èµ·å§‹ç‚¹Sçš„åæ ‡
    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < m; j++)
        {
            if(maze[i][j]=='S')
                x=i,y=j;
        } 
    }
    memset(visited,false,sizeof(visited));
    dfs(x,y,0);
    cout<< res <<endl;

    return 0;
}
```

ğŸš©3.nçš‡åé—®é¢˜

åœ¨è¿™é‡Œæ˜¯è®°å½•å¦ä¸€ç§è§£æ³•ï¼Œåœ¨é€’å½’ä¸­ç›¸å½“äºné‡å¾ªç¯é€æ¬¡åˆ¤æ–­ï¼Œè¿™é‡Œå¯ä»¥ç”¨å·¦æ–œboolæ•°ç»„å’Œå³æ–œæ•°ç»„å’Œåˆ—æ•°ç»„æ¥åˆ¤æ–­ä¸‹è¡Œæ”¾çš„ä½ç½®å¯ä¸å¯ä»¥æ”¾

ä»£ç åŸºæœ¬ç›´æ¥å¥—æ¨¡æ¿ï¼Œä¸è¿‡è¦æ³¨æ„åˆ¤æ–­å·¦æ–œæ¡ä»¶è¦åŠ nï¼Œå› ä¸ºå³ä¸Šè§’è¡Œæ•°-åˆ—æ•°æ˜¯è´Ÿå€¼æ‰€ä»¥åŠ ä¸Šnè®©ä»–ä¸ºæ­£ï¼Œè¿™æ ·å·¦æ–œç´¢å¼•å–å€¼å°±æ˜¯0~n-1

```cpp
#include<bits/stdc++.h>
using namespace std;
int res,n;
bool cols[100],zuoxie[100],youxie[100];
bool check(int k,int i)
{
	return !cols[i] && !zuoxie[k-i+n] && !youxie[k+i];
}
void dfs(int k)
{
	if(k==n+1)    //ç»“æŸæ¡ä»¶
	{
		res++;
		return;
	}
	for (int i = 1; i <= n; i++)
	{
		if(check(k,i))
		{
			cols[i]=true;
			zuoxie[k-i+n]=true; 
			youxie[k+i]=true;  //ä»¥ä¸Š3è¡Œæ˜¯åŠ æ ‡è®°
			dfs(k+1);
			cols[i]=false;     //ä¸‹é¢3è¡Œæ˜¯å–æ¶ˆæ ‡è®°
			zuoxie[k-i+n]=false; 
			youxie[k+i]=false;
		}	
	}
}
int main()
{
	cin>>n;
	dfs(1);
	cout<<res<<endl;
}
```